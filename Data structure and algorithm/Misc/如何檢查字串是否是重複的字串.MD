# 最短重複單元

找出一個字串中重複出現的子字串樣式（例如 ABCABC 是由 ABC 重複兩次組成），這在程式設計中通常被稱為尋找「最短重複單元」。要檢查並輸出像 ABC 這樣的結果，最簡單且優雅的方法是利用 Python 的字串特性：「雙倍字串法」。推薦方法：雙倍字串位移法這個邏輯非常巧妙：如果一個字串 $S$ 是由某個子字串 $P$ 重複組成的（如 $S = PP$），那麼將兩個 $S$ 拼接在一起後，去掉頭尾，中間一定還會出現完整的 $S$。

```python
def find_repeat_pattern(str):
    # 將字串加倍：ABCABCABCABC
    double_str = str+str

    # 去掉第一個字元與最後一個字元，避免直接找到原本的自己
    # 然後找尋 s 第一次出現的位置
    # index 就是理論上重複單元的長度(因為跳過第一個字元)
    index = double_str.find(str, 1)

    if index != -1 and index < len(str):
        return str[:index]
    else:
        return str  # 如果沒有重複模式，回傳原字串


str = "ABCABC"

print(find_repeat_pattern(str))
```

詳細解釋 (Explanation)
拼接字串： 假設 s = "ABCABC"，則 s + s 會變成 "ABCABCABCABC"。

搜尋偏移： 我們從索引 1 開始找 s。

在 A|BCABCABCABC 中尋找 "ABCABC"。

它會在索引 3 的位置找到匹配的字串。

切片輸出： 這個索引 3 剛好就是重複單元的長度。我們只要取 s[0:3]，就會得到 "ABC"。

另一種做法：正規表示法 (Regex)
如果您喜歡簡潔的寫法，可以使用 re 模組，它能直接「抓出」重複的樣式：

```python
import re

str1 = "ABCABC"
# 尋找一個組合 (.+?) 並檢查它是否接著重複出現 (\1)+ 直到結尾 $
match = re.match(r'^(.+?)\1+$', str1)

if match:
    print(match.group(1)) # 輸出: ABC
else:
    print(str1)
```

(.+?)：匹配一個或多個字元（非貪婪模式）。

\1+：這代表「重複剛才括號裡抓到的內容」一次以上。

^ 與 $：確保從頭到尾完整匹配。

# JavaScript

```JavaScript
function findRepeatPattern(s) {
    // 1. 將字串加倍: "ABCABCABCABC"
    let doubled = s + s;

    // 2. 從索引 1 開始找原本的字串 s
    // indexOf 會回傳找到的第一個起始索引
    let index = doubled.indexOf(s, 1);

    // 3. 如果找到的索引小於原字串長度，代表有重複模式
    if (index !== -1 && index < s.length) {
        return s.substring(0, index);
    }

    return s; // 若無重複，回傳原字串
}

console.log(findRepeatPattern("ABCABC")); // 輸出: "ABC"
console.log(findRepeatPattern("ABABAB")); // 輸出: "AB"
```

原理說明：

indexOf(s, 1)：從位置 1 開始搜尋，是為了避開在位置 0 找到自己。

找到的 index 剛好就是循環節的長度。

方法二：正規表示法 (Regex)
JavaScript 的 Regex 支援「反向引用 (Backreference)」，非常適合處理這種樣式匹配。

JavaScript

```Javascript
function findRepeatPatternRegex(s) {
    // ^(.+?)  -> 抓取最前面的字元組（非貪婪匹配）
    // \1+     -> 該組字元重複出現一次以上
    // $       -> 直到字串結尾
    const match = s.match(/^(.+?)\1+$/);

    return match ? match[1] : s;
}

console.log(findRepeatPatternRegex("ABCABC")); // 輸出: "ABC"
console.log(findRepeatPatternRegex("AAAAAA")); // 輸出: "A"
```

JavaScript 與 Python 的語法對比在處理這類問題時，兩者的主要差異僅在於方法名稱：

| 功能       | Python               | JavaScript            |
| ---------- | -------------------- | --------------------- |
| 字串拼接   | s + s                | s + s                 |
| 尋找索引   | s.find(sub, start)   | s.indexOf(sub, start) |
| 取得子字串 | s[0:index]           | s.substring(0, index) |
| 正則匹配   | re.match(pattern, s) | s.match(regex)        |
