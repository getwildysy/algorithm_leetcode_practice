# 第 7 章：遠端儲存庫操作 (Remote)

直到目前為止，我們所有的操作都發生在自己的電腦上 (Local)。現在我們要與世界連結，開始使用 **Remote Repository** (遠端儲存庫)。

## 7.1 什麼是 Remote？

```mermaid
graph LR
    Local[你的電腦 (Local Repo)]
    Remote[GitHub (Remote Repo)]
    
    Local -->|git push| Remote
    Remote -->|git pull| Local
    Remote -.->|git clone| Local
    
    style Remote fill:#bbf
    style Local fill:#bfb
```

我們通常會把遠端儲存庫簡稱為 **Remote**。最常見的 Remote 是 GitHub，但也可以是 GitLab, Bitbucket 或是公司內部的 Git Server。

---

## 7.2 建立連結：`git remote`

### 新增 Remote
假設你在 GitHub 上開了一個新的空專案 (Repo)。
```bash
git remote add origin https://github.com/user/project.git
```
*   `origin`：這是給遠端取的**暱稱** (Shortname)。你可以叫它 `github` 或 `backup`，但約定俗成第一個主要遠端都叫 `origin`。

### 檢視設定
```bash
git remote -v
# origin  https://github.com/user/project.git (fetch)
# origin  https://github.com/user/project.git (push)
```

---

## 7.3 上傳與下載：Push & Pull

### 1. 上傳 `git push`
把你在 Local 的 Commit 紀錄「備份」到 Remote。

```bash
git push -u origin main
```
*   `-u` (set-upstream)：綁定追蹤關係。設定好之後，下次你只需要打 `git push`，Git 就知道預設要推到 `origin` 的 `main`。

### 2. 下載 `git pull` (合併技)
`git pull` 其實是兩個指令的組合：**Fetch + Merge**。

```mermaid
graph TD
    Remote[Remote Repo]
    LocalRepo[Local Repo (Origin/main)]
    WorkDir[Working Directory]
    
    Remote -->|git fetch| LocalRepo
    LocalRepo -->|git merge| WorkDir
    
    Remote ==>|git pull| WorkDir
```

*   **`git fetch`**：單純下載資料到 `.git` 資料庫，**不會動到你的工作檔案**。這是最安全的操作，讓你看看別人改了什麼。
*   **`git merge`**：把下載下來的資料 (例如 `origin/main`) 合併進你目前的分支。

> **小技巧**：如果你不想自動合併 (怕衝突)，可以先下 `git fetch origin`，用 `git log origin/main` 看一下，確定沒問題再 merge。

---

## 7.4 下載整個專案：`git clone`

```bash
git clone https://github.com/user/project.git
```
這會做三件事：
1.  `mkdir project` (建立目錄)
2.  `git init` (初始化)
3.  `git remote add origin ...` (設定遠端)
4.  `git fetch` (下載資料)
5.  `git checkout` (切換到主分支)

只需一行指令，全部搞定。

---

## 7.5 常見錯誤 (Permission / Auth)

如果你在 push 時看到 `Permission denied` 或 `Authentication failed`：
1.  **檢查權限**：確認你有被加入該 Repo 的 Collaborators。
2.  **檢查驗證方式**：
    *   **HTTPS**: GitHub 已不再支援密碼，你需要產生 **Personal Access Token (PAT)** 當作密碼輸入。
    *   **SSH**: 推薦使用 SSH Key (`ssh-keygen`)，將公鑰上傳 GitHub，一勞永逸。
