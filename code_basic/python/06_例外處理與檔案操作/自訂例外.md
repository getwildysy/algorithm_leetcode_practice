# 自訂例外 (Custom Exceptions)

雖然 Python 提供了豐富的內建例外類型，但在開發大型專案時，定義特定於應用程式的例外類型可以讓錯誤處理更清晰、更有意義。

## 1. 定義自訂例外

自訂例外通常繼承自 `Exception` 類別。

```python
class InsufficientFundsError(Exception):
    """當帳戶餘額不足時拋出"""
    pass

class InvalidAmountError(Exception):
    """當金額無效(如負數)時拋出"""
    pass
```

## 2. 使用自訂例外

```python
class BankAccount:
    def __init__(self, balance):
        self.balance = balance

    def withdraw(self, amount):
        if amount <= 0:
            raise InvalidAmountError(f"提款金額必須大於 0，輸入為: {amount}")
        if amount > self.balance:
            raise InsufficientFundsError(f"餘額不足！當前餘額: {self.balance}, 嘗試提款: {amount}")
        
        self.balance -= amount
        return self.balance

# 測試
account = BankAccount(100)

try:
    account.withdraw(150)
except InsufficientFundsError as e:
    print(f"錯誤: {e}")
except InvalidAmountError as e:
    print(f"輸入錯誤: {e}")
```

## 3. 繼承結構的好處

你可以建立一個基礎例外類別，然後讓其他例外繼承它。這樣在 `except` 時可以捕捉特定錯誤，也可以捕捉整個類別群組。

```python
class MyAppError(Exception):
    pass

class DatabaseError(MyAppError):
    pass

class NetworkError(MyAppError):
    pass

try:
    # ...
    pass
except MyAppError:
    # 捕捉所有應用程式相關的錯誤
    pass
```
