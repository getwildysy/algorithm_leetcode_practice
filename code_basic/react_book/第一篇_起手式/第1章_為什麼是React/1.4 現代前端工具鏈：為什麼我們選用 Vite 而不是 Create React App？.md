# 1.4 現代前端工具鏈：為什麼我們選用 Vite 而不是 Create React App？

在過去幾年中，React 開發者的入門工具經歷了巨大的變革。從早期的手動配置 Webpack，到 Create React App (CRA) 的一鍵建置，再到現在 Vite 的極速體驗。本節將帶你了解這段演變，以及為什麼 Vite 成為了現代開發的首選。

## build tools 的演進

### 1. 手工時代 (The Manual Era)
早期的前端開發需要手動引入 `<script>`標籤。隨著專案變大，檔案依賴關係變得難以管理，全域變數污染嚴重。

### 2. Bundler 時代 (Webpack)
為了模組化 (Module)，Webpack 等打包工具應運而生。它們將所有程式碼「打包」成一個或多個 bundle 檔案。
- **優點**：模組化管理、豐富的 loader 生態。
- **缺點**：隨著專案變大，建置速度越來越慢。每次按下儲存，都要重新打包整個 bundle。

### 3. Native ESM 時代 (Vite)
現代瀏覽器已經原生支援 ES Modules (ESM)。Vite 利用這一點，在開發模式下**不打包**，而是直接提供源碼給瀏覽器。

## 什麼是 Create React App (CRA)？

CRA 是 Facebook 官方推出的 React 腳手架工具。它的出現解決了新手「配置 Webpack 地獄」的問題。

### CRA 的運作方式
- 基於 Webpack。
- 開發時會將所有程式碼打包在記憶體中。
- 為了熱更新 (HMR)，每次修改都需要重新建置依賴圖。

### CRA 的困境
- **啟動慢**：大型專案啟動可能需要幾分鐘。
- **更新慢**：修改一行程式碼，HMR 可能會有明顯延遲。
- **維護停滯**：CRA 的官方維護已逐漸放緩，React 官方文件現在更推薦使用框架 (Next.js/Remix) 或 Vite。

## 為什麼選擇 Vite？

Vite (法語，意為「快」) 由 Vue.js 作者 Evan You 開發，但它是一個通用的建置工具，對 React 支援極佳。

### Vite 的核心優勢

#### 1. 極速的伺服器啟動 (Instant Server Start)
Vite 使用 **esbuild** (基於 Go 語言) 來預構建依賴。Go 的執行速度比 JavaScript (Webpack 使用 Node.js) 快 10-100 倍。
啟動開發伺服器時，Vite 不需要打包整個應用，它只需要啟動一個 HTTP 伺服器。

#### 2. 快如閃電的 HMR (Hot Module Replacement)
在 Webpack 中，修改一個檔案，打包工具需要重新計算依賴。
而在 Vite 中，HMR 是基於原生 ESM 執行的。當你修改一個檔案，瀏覽器只需要重新請求該模組即可，效能與專案大小無關。

#### 3. 豐富的生態系
Vite 擁有強大的 Plugin 介面（相容 Rollup），並且開箱即用支援 TypeScript、JSX、CSS Modules 等。

### 效能對比

| 特性 | Webpack (CRA) | Vite |
| :--- | :--- | :--- |
| **語言** | Node.js (JavaScript) | Esbuild (Go) + Rollup |
| **開發伺服器啟動** | 隨專案大小變慢 (秒級~分級) | 幾毫秒 (Constant Time) |
| **HMR 速度** | 隨專案大小變慢 | 極快，與專案大小無關 |
| **生產環境打包** | Webpack | Rollup |

## 結論

雖然 CRA 曾經是 React 開發的標準，但隨著技術演進，**Vite 已經成為 Client-side React 專案的新標準**。它提供了更好的開發體驗、更快的速度，讓我們能專注於寫程式，而不是等待進度條。

接下來，我們將實際使用 Vite 來建立我們的第一個專案。
