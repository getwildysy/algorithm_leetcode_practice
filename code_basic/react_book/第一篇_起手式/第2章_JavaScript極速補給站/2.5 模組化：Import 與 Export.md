# 2.5 模組化：Import 與 Export

在現代前端開發中，我們不再將數千行程式碼寫在一個檔案裡。我們將程式碼拆分成多個「模組 (Modules)」，然後在需要的地方引入。React 專案是完全建立在 ES Modules (ESM) 系統之上的。

## 1. 為什麼需要模組化？

- **可維護性**：每個檔案只負責一件事情。
- **可重用性**：寫好的 Function 或 Component 可以在多處使用。
- **命名空間**：避免全域變數污染。

## 2. 匯出 (Export) 的兩種方式

ES Modules 提供了兩種匯出方式：**Named Export (具名匯出)** 和 **Default Export (預設匯出)**。

| 特性 | Named Export | Default Export |
| :--- | :--- | :--- |
| **數量** | 一個檔案可以有多個 | 一個檔案只能有一個 |
| **引入時命名** | 必須使用原名 (或用 `as` 改名) | 可以隨意取名 |
| **語法** | `export const ...` | `export default ...` |
| **引入符號** | 需要大括號 `{ }` | 不需要大括號 |

### 2.1 具名匯出 (Named Export)

適用於工具函式庫 (Utils) 或包含多個小元件的檔案。

```javascript
// utils.js
export const add = (a, b) => a + b;
export const PI = 3.14159;

export function formatName(name) {
  return name.toUpperCase();
}
```

**引入方式：**
```javascript
// App.js
import { add, PI } from './utils'; // 變數名稱必須對應

console.log(add(1, 2));
```

### 2.2 預設匯出 (Default Export)

React 的慣例是：**一個檔案通常只定義一個主要 Component，並使用 Default Export**。

```jsx
// Button.jsx
function Button() {
  return <button>Click me</button>;
}

export default Button; // 只能有一個
```

**引入方式：**
```javascript
// App.js
// 名稱可以自定義，不一定要叫 Button (但通常會保持一致)
import MyBtn from './Button'; 

function App() {
  return <MyBtn />;
}
```

## 3. 混用與重匯出 (Re-export)

### 混用

一個檔案可以同時擁有 Default Export 和 Named Export。

```javascript
// API.js
export const BASE_URL = 'https://api.example.com'; // Named

export default function fetchData() { ... } // Default
```

```javascript
import fetchData, { BASE_URL } from './API';
```

### 重匯出 (Re-export / Barrel File)

這是一種常見的設計模式，通常用 `index.js` 將同目錄下的多個模組統一匯出，讓外部引入更簡潔。

**目錄結構：**
```
components/
├── Button.js
├── Card.js
└── index.js  <-- Barrel File
```

`components/index.js` 內容：
```javascript
export { default as Button } from './Button';
export { default as Card } from './Card';
```

**外部使用：**
```javascript
// 以前要寫兩行
// import Button from './components/Button';
// import Card from './components/Card';

// 現在只要一行
import { Button, Card } from './components';
```

## 常見錯誤

### 1. 忘記大括號
```javascript
// 錯誤：add 是 Named Export，必須加 {}
import add from './utils'; 

// 正確
import { add } from './utils'; 
```

### 2. 檔名副檔名
在 Vite 專案中，`.jsx` 和 `.js` 通常可以省略副檔名。但在某些設定下 (或 Node.js 環境) 則必須寫完整。
建議：
- 自定義模組 (`./Button`)：通常省略。
- 套件模組 (`react`)：如果是 npm 套件，直接寫套件名，不需要路徑。

```javascript
import React from 'react'; // npm 套件
import App from './App';   // 本地檔案
```
