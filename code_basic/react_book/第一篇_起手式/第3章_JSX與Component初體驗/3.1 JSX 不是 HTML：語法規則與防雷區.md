# 3.1 JSX 不是 HTML：語法規則與防雷區

JSX 看起來很像 HTML，但它骨子裡其實是 **JavaScript**。這意味著它的語法規則更嚴謹，且具有程式語言的邏輯。

## 1. JSX 的本質

當你寫下：
```jsx
const element = <h1 className="title">Hello</h1>;
```

Babel 編譯器會將它轉換為：
```javascript
const element = React.createElement(
  'h1',
  { className: 'title' },
  'Hello'
);
```
因為它最終是一個 JavaScript 物件，所以你可以把它存成變數、當作參數傳遞，或從函式回傳。

---

## 2. 關鍵差異與語法規則

### 2.1 屬性名稱轉為駝峰式 (CamelCase)
HTML 屬性不分大小寫，但 JSX 屬性遵循 JS 變數命名慣例。

- `class` ⮕ `className` (因為 `class` 是 JS 保留字)
- `for` ⮕ `htmlFor` (避免與 `for` 迴圈混淆)
- `onclick` ⮕ `onClick`
- `tabindex` ⮕ `tabIndex`

### 2.2 必須閉合所有標籤
HTML 對某些標籤（如 `<img>`, `<input>`, `<br>`）很寬容，不想關就不關。但在 JSX 中，**所有標籤都必須閉合**。

```jsx
// ❌ 錯誤
<img src="logo.png">
<input type="text">

// ✅ 正確 (自閉合)
<img src="logo.png" />
<input type="text" />
```

### 2.3 只能有一個根元素
一段 JSX 必須被包在一個父層標籤中。如果不想多生出一個 `div` 污染 DOM 結構，請使用 `<Fragment>` 或簡寫 `<>...</>`。

```jsx
// ❌ 錯誤：兩個兄弟元素並列
return (
  <h1>Title</h1>
  <p>Content</p>
);

// ✅ 正確：Fragment
return (
  <>
    <h1>Title</h1>
    <p>Content</p>
  </>
);
```

---

## 3. 在 JSX 中寫 JavaScript

使用大括號 `{ }` 可以在 JSX 中嵌入任何 **JavaScript 表達式 (Expression)**。

### 3.1 什麼是表達式 (Expression)？
簡單來說，就是 **「會產生一個值」** 的程式碼片段。
- ✅ 變數：`{name}`
- ✅ 運算：`{score + 10}`
- ✅ 函式呼叫：`{formatDate(date)}`
- ✅ 三元運算子：`{isLogin ? 'V' : 'X'}`
- ✅ map 方法：`{items.map(...)}`

### 3.2 什麼不是表達式 (Statement)？
也就是 **「敘述句」**，它們不會直接產生值，所以**不能**放在 JSX 的大括號裡。
- ❌ if...else 陳述句
- ❌ for 迴圈
- ❌ switch 陳述句

```jsx
// ❌ 錯誤：這是 Statement
<div>
  { if (isDone) { return 'Finished'; } }
</div>

// ✅ 正確：用三元運算子取代
<div>
  { isDone ? 'Finished' : 'Running' }
</div>
```

---

## 4. 條件渲染 (Conditional Rendering)

這是 React 中最強大的功能之一。

### 4.1 三元運算子 (Ternary Operator)
適用於「二選一」的情況。

```jsx
<button>
  {isLoggedIn ? '登出' : '登入'}
</button>
```

### 4.2 邏輯與 (&&)
適用於「有就顯示，沒有就什麼都不做」的情況。

```jsx
{/* 如果 showWarning 是 true，就顯示警告；否則顯示 null (什麼都沒有) */}
{showWarning && <div className="alert">注意！</div>}
```

> [!CAUTION]
> **陷阱：數字 0**
> JavaScript 中 `0` 是 falsy，但 React 會把數字 `0` 渲染出來。
> ```jsx
> const count = 0;
> // 預期：什麼都不顯示
> // 結果：顯示 "0"
> {count && <h1>Messages</h1>}
> 
> // ✅ 修正：確保左邊是布林值
> {count > 0 && <h1>Messages</h1>}
> ```

### 4.3 複雜邏輯
如果判斷太複雜，建議拉出來寫成變數或函式。

```jsx
function UserPanel() {
  let content;
  if (loading) {
    content = <Spinner />;
  } else if (user) {
    content = <Profile user={user} />;
  } else {
    content = <LoginBtn />;
  }

  return <div>{content}</div>;
}
```

## 小結

- JSX 是 JS 物件，不是字串。
- 屬性要用 `className`。
- 標籤一定要閉合。
- `{ }` 裡面只能放表達式，不能放 `if` 或 `for`。
- 善用 `&&` 和 `? :` 處理條件渲染，小心 `0` 的陷阱。
