# 3.3 Props 的傳遞：父子元件溝通的基本功

**Props** (Properties 的縮寫) 是 React 元件之間溝通的橋樑。它讓元件可以接收外部資料，變得動態且可重用。

> [!IMPORTANT]
> **核心原則：單向資料流 (One-Way Data Flow)**
> 資料永遠只能 **從父元件流向子元件**。子元件無法直接修改父元件的資料（必須透過 Callback function）。

## 1. 基本傳遞與接收

### 1.1 傳遞 Props (父元件)
就像寫 HTML 屬性一樣：

```jsx
<Welcome name="Alice" age={25} isAdmin={true} />
// 布林值 true 可以簡寫：
<Welcome name="Alice" age={25} isAdmin />
```

### 1.2 接收 Props (子元件)
React 會將所有屬性打包成一個 `props` 物件。

#### ❌ 舊式寫法 (不推薦)
```jsx
function Welcome(props) {
  return <h1>Hello, {props.name}</h1>;
}
```

#### ✅ 解構寫法 (推薦)
直接在參數列表解構，程式碼更乾淨，還能清楚看到這個元件需要什麼。

```jsx
function Welcome({ name, age, isAdmin }) {
  return (
    <div>
      <h1>Hello, {name}</h1>
      {isAdmin && <span className="badge">Admin</span>}
    </div>
  );
}
```

---

## 2. 進階技巧

### 2.1 預設值 (Default Parameters)
利用 ES6 的預設參數功能，防止 Props 沒傳時壞掉。

```jsx
function Avatar({ src, size = 50 }) {
  // 如果沒傳 size，預設就是 50
  return <img src={src} width={size} height={size} />;
}
```

### 2.2 **Children Prop**：元件的插槽 (Slot)
這是一個特殊的 Prop。當你把標籤寫成「雙標籤」時，夾在中間的內容就會變成 `children`。這讓元件可以像「容器」一樣包裹其他內容。

**定義容器元件：**
```jsx
function Card({ title, children }) {
  return (
    <div className="card-box">
      <div className="card-header">{title}</div>
      <div className="card-body">
        {/* 這裡就是插槽，外部傳什麼進來就顯示什麼 */}
        {children}
      </div>
    </div>
  );
}
```

**使用容器元件：**
```jsx
<Card title="關於我">
  <img src="me.jpg" />
  <p>這是我的自我介紹...</p>
  <button>聯絡我</button>
</Card>
```
這就是 **Composition (組合)** 的強大之處！`Card` 元件不需要知道裡面放的是圖片還是按鈕，它只負責外框樣式。

### 2.3 Spread Props (透傳)
當你想把父層傳來的所有屬性，原封不動地交給內部的 HTML 標籤時。

```jsx
function BigButton({ className, ...rest }) {
  // className 我們自己處理，其他的 (如 onClick, id, type) 通通丟給 button
  return <button className={`big-btn ${className}`} {...rest} />;
}

// 使用時：
<BigButton onClick={handleClick} type="submit" disabled />
```

---

## 3. Props 的型別檢查 (TypeScript / PropTypes)

雖然本章還沒深究 TypeScript，但在實務上，Props 的防呆非常重要。

如果你使用純 JS，可能會遇到：
```jsx
// 預期 age 是數字，結果傳了字串 "20"
function Calculator({ age }) {
  return <div>Next year: {age + 1}</div>; // 結果變 "201" (字串串接) 😱
}
```

### 解決方案
1. **PropTypes** (舊專案常用)：React 內建的執行期檢查。
2. **TypeScript** (現代主流)：編譯期檢查。

```tsx
// TypeScript 預覽
type Props = {
  name: string;
  age: number;
  isActive?: boolean; // 可選
}

function User({ name, age }: Props) { ... }
```

## 小結

- **Props 解構**：`function ({ name })` 是標準寫法。
- **預設值**：`{ name = 'Guest' }` 避免 undefined。
- **Children**：實現「容器」元件的關鍵。
- **單向流**：記住，Props 是 **Read-Only (唯讀)** 的，想改資料？請找父元件。
