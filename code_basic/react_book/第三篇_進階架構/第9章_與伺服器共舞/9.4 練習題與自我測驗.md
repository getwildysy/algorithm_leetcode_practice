# 9.4 練習題與自我測驗

## 觀念測驗 (Multiple Choice)

### Q1: [Fetch] 關於 Fetch API 的錯誤處理，下列何者正確？
1. 伺服器回傳 404 時，Fetch 會拋出 Error (進入 catch)。
2. 伺服器回傳 500 時，Fetch 會拋出 Error (進入 catch)。
3. 只要網路斷線，Fetch 會拋出 Error。
4. `response.ok` 只在 status code 為 200 時為 true。

<details>
<summary>點擊查看答案</summary>
**答案：3**
<br>
**解析**：Fetch 只在網路層面失敗 (斷線、DNS解析失敗) 時才會 reject promise。4xx/5xx 都算成功連線，需手動檢查 `response.ok`。
</details>

---

### Q2: [React Query] 為什麼使用 React Query 後，我們不需要手動將 API 資料存進 Redux/Global State？
1. 因為 React Query 會自動把資料存進 Redux。
2. 因為 React Query 本身就是一個 Server State 的 Cache Manager，它可以在各個元件間共享快取資料。
3. 因為 API 資料不需要共享。

<details>
<summary>點擊查看答案</summary>
**答案：2**
<br>
**解析**：Server State (快取) 與 Client State (UI 狀態) 應該分開管理。React Query 負責前者，Global State 負責後者。
</details>

---

## 程式碼挑戰 (Coding Challenges)

### 挑戰 1：手寫 useFetch
**目標**：不看之前的範例，憑記憶寫一個 `useFetch` Hook。
- 支援 Loading, Error, Data 狀態。
- 支援 Cleanup (防止 Race Condition)。
- (進階) 支援 `options` 參數傳遞。

### 挑戰 2：無限滾動列表 (Infinite Scroll)
**目標**：利用 API 的 page 參數實作。
- 載入第一頁 10 筆資料。
- 底部放一個 "Load More" 按鈕。
- 點擊後載入第二頁，並**合併**到目前的列表中。
- 提示：`setData([...oldData, ...newData])`。

### 挑戰 3：天氣查詢 (Error Handling)
**目標**：
- 製作一個輸入框查詢城市天氣。
- 當使用者輸入不存在的城市時 (404)，介面要顯示「找不到該城市」。
- 當網路斷線時，介面要顯示「請檢查網路連線」。
