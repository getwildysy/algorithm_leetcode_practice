# 4.4 練習題與自我測驗

## 觀念測驗 (Multiple Choice)

### Q1: [State] 關於 State 與變數的差異，何者正確？
1. 修改 `let` 變數會觸發 React 重新渲染。
2. State 儲存在 DOM 節點上。
3. 元件重新渲染時，`useState` 宣告的變數會被重置為初始值。
4. State 的改變會觸發重新渲染，且值會在渲染之間保留。

<details>
<summary>點擊查看答案</summary>
**答案：4**
<br>
**解析**：這是 State 的核心特性。普通變數在重新渲染時會被重置，State 則由 React 內部保存。
</details>

---

### Q2: [Batching]執行下列程式碼後，Count 的值會變多少？(初始為 0)
```jsx
const handleClick = () => {
  setCount(count + 1);
  setCount(count + 1);
  setCount(count + 1);
};
```
1. 1
2. 3
3. 0
4. undefined

<details>
<summary>點擊查看答案</summary>
**答案：1**
<br>
**解析**：因為沒有使用 Functional Update，三次 `setCount` 拿到的 `count` 都是閉包中的舊值 (0)。React 等於是執行了三次 `setCount(1)`。
</details>

---

### Q3: [Update] 下列哪個是更新物件 State 的正確寫法？
```jsx
const [user, setUser] = useState({ name: 'Alice', age: 20 });
```
1. `setUser({ age: 21 })`
2. `user.age = 21`
3. `setUser({ ...user, age: 21 })`
4. `setUser(user.age + 1)`

<details>
<summary>點擊查看答案</summary>
**答案：3**
<br>
**解析**：React 的 State 更新是「替換」而不是「合併」，所以必須用 Spread Operator (`...user`) 來保留原本的 `name` 屬性。
</details>

---

## 程式碼挑戰 (Coding Challenges)

### 挑戰 1：修復損壞的計數器
**情境**：有一個按鈕 "Add 3"，但點擊後只加了 1。
**目標**：修改程式碼，讓它能正確地一次加 3。
```jsx
// ❌ 錯誤程式碼
function addThree() {
  setCount(count + 1);
  setCount(count + 1);
  setCount(count + 1);
}
```

### 挑戰 2：多個 Input 的處理
**目標**：建立一個註冊表單，包含 `username`, `email`, `password`。
**限制**：只能使用**一個** `useState` 物件來管理所有欄位。
```jsx
const [form, setForm] = useState({
  username: '',
  email: '',
  password: ''
});
```
**提示**：使用 `e.target.name` 和 Computed Property Name (`[name]: value`)。

### 挑戰 3：惰性初始化
**目標**：模擬一個昂貴的計算。
建立一個元件，初始值是 `fibonacci(30)` 的結果。確保這個昂貴的計算只在第一次渲染時執行，而不是每次輸入框打字時都執行。
