# 實戰演練：製作一個「待辦事項清單 (To-Do List)」

## 專案目標

建立一個功能完整的待辦事項清單應用，整合本章所學的所有知識點。

## 功能需求

### 基本功能
- [ ] 新增待辦事項
- [ ] 顯示待辦事項列表（使用正確的 key）
- [ ] 標記完成/未完成（受控元件）
- [ ] 刪除待辦事項
- [ ] 顯示待辦數量統計

### 進階功能
- [ ] 篩選顯示（全部/未完成/已完成）
- [ ] 編輯待辦事項
- [ ] 資料持久化（localStorage）
- [ ] 清空已完成項目
- [ ] 拖曳排序（可選）

## 資料結構

```jsx
// 單一 Todo 項目
{
  id: 1,
  text: '學習 React',
  completed: false,
  createdAt: '2024-01-01T10:00:00.000Z'
}
```

## 核心實作框架

```jsx
function TodoList() {
  const [todos, setTodos] = useState([]);
  const [inputValue, setInputValue] = useState('');
  const [filter, setFilter] = useState('all'); // all, active, completed

  // 新增待辦
  const addTodo = () => {
    if (inputValue.trim()) {
      const newTodo = {
        id: Date.now(),
        text: inputValue,
        completed: false,
        createdAt: new Date().toISOString()
      };
      setTodos([...todos, newTodo]);
      setInputValue('');
    }
  };

  // 切換完成狀態
  const toggleTodo = (id) => {
    setTodos(todos.map(todo =>
      todo.id === id ? { ...todo, completed: !todo.completed } : todo
    ));
  };

  // 刪除待辦
  const deleteTodo = (id) => {
    setTodos(todos.filter(todo => todo.id !== id));
  };

  // 篩選顯示
  const filteredTodos = todos.filter(todo => {
    if (filter === 'active') return !todo.completed;
    if (filter === 'completed') return todo.completed;
    return true;
  });

  // 資料持久化
  useEffect(() => {
    const saved = localStorage.getItem('todos');
    if (saved) {
      setTodos(JSON.parse(saved));
    }
  }, []);

  useEffect(() => {
    localStorage.setItem('todos', JSON.stringify(todos));
  }, [todos]);

  return (
    <div className="todo-app">
      {/* 輸入區 */}
      <div className="input-section">
        <input
          value={inputValue}
          onChange={(e) => setInputValue(e.target.value)}
          onKeyPress={(e) => e.key === 'Enter' && addTodo()}
          placeholder="新增待辦事項..."
        />
        <button onClick={addTodo}>新增</button>
      </div>

      {/* 篩選器 */}
      <div className="filters">
        <button onClick={() => setFilter('all')}>全部</button>
        <button onClick={() => setFilter('active')}>未完成</button>
        <button onClick={() => setFilter('completed')}>已完成</button>
      </div>

      {/* 列表 */}
      <ul className="todo-list">
        {filteredTodos.map(todo => (
          <li key={todo.id} className={todo.completed ? 'completed' : ''}>
            <input
              type="checkbox"
              checked={todo.completed}
              onChange={() => toggleTodo(todo.id)}
            />
            <span>{todo.text}</span>
            <button onClick={() => deleteTodo(todo.id)}>刪除</button>
          </li>
        ))}
      </ul>

      {/* 統計 */}
      <div className="stats">
        剩餘 {todos.filter(t => !t.completed).length} 項未完成
      </div>
    </div>
  );
}
```

## 進階挑戰

### 1. 編輯功能
- 雙擊進入編輯模式
- ESC 取消編輯
- Enter 確認編輯

### 2. 優先級
- 新增優先級欄位（高/中/低）
- 按優先級排序
- 顏色標示

### 3. 到期日期
- 新增到期日期
- 過期提示
- 按日期排序

### 4. 標籤系統
- 為待辦新增標籤
- 按標籤篩選
- 標籤管理

### 5. 搜尋功能
- 即時搜尋
- 關鍵字高亮
- 進階篩選

## 測試重點

- [ ] key 值是否使用唯一 ID（不是 index）
- [ ] 輸入框是否為受控元件
- [ ] 勾選框是否正確綁定 checked
- [ ] localStorage 是否正常運作
- [ ] 邊界情況處理（空輸入、特殊字元等）

---
**狀態：** 📝 待補充完整樣式與進階功能實作
