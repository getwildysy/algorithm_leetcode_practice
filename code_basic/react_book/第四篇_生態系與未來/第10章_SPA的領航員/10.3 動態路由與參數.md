# 10.3 動態路由與參數

很多時候，我們的網址不是固定的，例如「商品詳情頁」的 ID 是變動的 (`/product/123`, `/product/456`)。

## 1. URL Params (路徑參數)

### 定義
使用冒號 `:` 來表示參數。

```jsx
<Route path="/product/:id" element={<ProductDetail />} />
```

### 讀取 (`useParams`)
在元件中，使用 `useParams` Hook 來取得參數值。

```jsx
import { useParams } from 'react-router-dom';

function ProductDetail() {
  const { id } = useParams(); // 對應 path 中的 :id
  return <h1>Product ID: {id}</h1>;
}
```

---

## 2. Query String (查詢字串)

例如：`/search?q=iphone&sort=price`

### 讀取與設定 (`useSearchParams`)
類似 `useState`，它回傳一個 getter 和一個 setter。

```jsx
import { useSearchParams } from 'react-router-dom';

function SearchPage() {
  const [searchParams, setSearchParams] = useSearchParams();
  
  const query = searchParams.get('q'); // 'iphone'
  
  const updateSort = () => {
    // 更新 URL，瀏覽器網址會變，但不會刷新
    setSearchParams({ q: query, sort: 'date' });
  };

  return (
    <div>
      Searching for: {query}
      <button onClick={updateSort}>Sort by Date</button>
    </div>
  );
}
```

## 3. 程式化導航 (`useNavigate`)

如果不是點擊連結，而是要在「表單送出後」或「登入成功後」跳轉頁面，使用 `useNavigate`。

```jsx
import { useNavigate } from 'react-router-dom';

function Login() {
  const navigate = useNavigate();

  const handleLogin = async () => {
    await api.login();
    // 跳轉到首頁
    navigate('/'); 
    // 或者: navigate(-1) 回上一頁
  };
}
```

## 小結

- **Params**: `/users/:id` -> `useParams()`
- **Query**: `?key=value` -> `useSearchParams()`
- **Navigate**: JS 跳轉 -> `useNavigate()`